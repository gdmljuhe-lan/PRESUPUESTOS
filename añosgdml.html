<!DOCTYPE html>
<html>
<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>AÑOS</title>
  <!-- font awesome style -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,600,700|Roboto:400,700&display=swap" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />
  <!-- Custom CSS for table styling -->
  <style>
    #yearsTable th,
    #yearsTable td {
      text-align: center;
      text-transform: uppercase;
      padding: 15px; /* Increased padding for wider cells */
    }
    #yearsTable th {
      min-width: 120px; /* Minimum width for headers */
    }
    #yearsTable td {
      min-width: 150px; /* Wider cells for content */
    }
    #yearsTable .btn {
      text-transform: uppercase; /* Uppercase button text */
    }
    #yearsTable .actions-cell {
      display: flex;
      justify-content: center;
      gap: 10px; /* Space between buttons */
    }
    #yearsTable .year-link {
      color: #000000; /* Set to black */
      text-decoration: none;
      cursor: pointer;
      background: none; /* Prevent any background */
      outline: none; /* Prevent outline */
      border: none; /* Prevent border */
    }
    #yearsTable .year-link:hover {
      text-decoration: underline; /* Underline on hover */
    }
    #yearsTable .year-link:focus,
    #yearsTable .year-link:active {
      outline: none; /* Prevent focus outline */
      box-shadow: none; /* Prevent focus shadow */
    }
  </style>
</head>
<body class="sub_page">
  <div class="hero_area">
    <!-- header section starts -->
    <header class="header_section">
      <div class="container">
        <div class="top_contact-container">
          <div class="tel_container">
            <a href="">
              PRESUPUESTOS MOBILIARIO
            </a>
          </div>
          <div class="social-container">
            <a href="">
              <img src="images/fb.png" alt="Facebook" class="s-1" onerror="this.src='https://via.placeholder.com/30?text=FB'">
            </a>
            <a href="">
              <img src="images/twitter.png" alt="Twitter" class="s-2" onerror="this.src='https://via.placeholder.com/30?text=TW'">
            </a>
            <a href="">
              <img src="images/instagram.png" alt="Instagram" class="s-3" onerror="this.src='https://via.placeholder.com/30?text=IG'">
            </a>
          </div>
        </div>
      </div>
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container pt-3">
          <a class="navbar-brand" href="iniciogdml.html">
            <img src="images/logo.png" alt="Logo" onerror="this.src='https://via.placeholder.com/50?text=Logo'">
            <span>
              PRESUPUESTOS
            </span>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <div class="d-flex flex-column flex-lg-row align-items-center w-100 justify-content-between">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="iniciogdml.html">INICIO <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="marcasgdml.html"> MARCAS </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="galeriagdml.html"> GALERIA </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="buy.html"> Online Buy </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="news.html"> News </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="contact.html">Contact us</a>
                </li>
              </ul>
              <form class="form-inline">
                <input type="search" placeholder="Search">
                <button class="btn my-2 my-sm-0 nav_search-btn" type="submit"></button>
              </form>
              <div class="login_btn-contanier ml-0 ml-lg-5">
                <a href="">
                  <img src="images/user.png" alt="User" onerror="this.src='https://via.placeholder.com/30?text=User'">
                  <span>
                    Login
                  </span>
                </a>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </header>
    <!-- end header section -->
  </div>
  <!-- INICIA LISTADO DE AÑOS -->
  <section class="about_section layout_padding">
    <div class="container">
      <div class="custom_heading-container">
        <h2>
          LISTADO DE AÑOS
        </h2>
      </div>
      <div class="detail-box">
        <p>
          AQUÍ PODRÁS ENCONTRAR EL LISTADO DE AÑOS PARA LA MARCA: <span id="brandName"></span>
        </p>
        <!-- Formulario para agregar nuevo año -->
        <div class="mb-4">
          <h3>AGREGAR NUEVO AÑO</h3>
          <form id="addYearForm">
            <div class="form-group">
              <label for="yearInput">AÑO:</label>
              <input type="number" class="form-control" id="yearInput" min="1900" max="2100" required>
            </div>
            <button type="submit" class="btn btn-primary">AGREGAR</button>
          </form>
        </div>
        <!-- Tabla de años -->
        <table class="table table-striped" id="yearsTable">
          <thead>
            <tr>
              <th>NÚMERO</th>
              <th>AÑO</th>
              <th>ACCIONES</th>
            </tr>
          </thead>
          <tbody>
            <!-- Filas se agregarán dinámicamente aquí -->
          </tbody>
        </table>
      </div>
    </div>
  </section>
  <!-- INFORMACION DE CONTACTO -->
  <section class="info_section layout_padding2">
    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <div class="info_contact">
            <h4>
              ANALISTAS
            </h4>
            <div class="box">
              <div class="img-box"></div>
              <div class="detail-box">
                <h6>
                  ANALISTA 1
                </h6>
              </div>
            </div>
            <div class="box">
              <div class="img-box"></div>
              <div class="detail-box">
                <h6>
                  ANALISTA 2
                </h6>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="info_menu">
            <h4>
              Menu
            </h4>
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="iniciogdml.html">INICIO <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="marcasgdml.html"> MARCAS </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="galeriagdml.html"> GALERIA </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="buy.html"> Online Buy </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-6">
          <div class="info_news">
            <h4>
              PRESUPUESTOS MOBILIARIO
            </h4>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- FIN DE SECCION INFO -->
  <!-- SECCION PIE DE PAGINA -->
  <section class="container-fluid footer_section">
    <p>
      &copy; 2025 Design by
      <a href="https://INSTAGRAM.COM/GADMIEL__">gdml</a>
    </p>
  </section>
  <!-- SECCION FIN PIE DE PAGINA -->
  <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.js"></script>
  <!-- JavaScript para manejar el listado de años -->
  <script type="text/javascript">
    // Obtener el nombre de la marca desde la URL
    const urlParams = new URLSearchParams(window.location.search);
    const brandName = urlParams.get('brand') || 'Desconocida';
    document.getElementById('brandName').textContent = brandName.toUpperCase();
    // Inicializar contador para números
    let yearCounter = 1;
    // Función para verificar si un año ya existe
    function yearExists(year) {
      const tableBody = document.querySelector('#yearsTable tbody');
      const rows = tableBody.querySelectorAll('tr');
      for (const row of rows) {
        const yearCell = row.querySelector('td:nth-child(2)').textContent;
        if (yearCell === year) {
          return true;
        }
      }
      return false;
    }
    // Función para ordenar la tabla de menor a mayor por año
    function sortTable() {
      const tableBody = document.querySelector('#yearsTable tbody');
      const rows = Array.from(tableBody.querySelectorAll('tr'));
      rows.sort((a, b) => {
        const yearA = parseInt(a.querySelector('td:nth-child(2)').textContent);
        const yearB = parseInt(b.querySelector('td:nth-child(2)').textContent);
        return yearA - yearB;
      });
      // Limpiar y reinsertar filas ordenadas
      tableBody.innerHTML = '';
      rows.forEach((row, index) => {
        row.querySelector('td:first-child').textContent = index + 1; // Actualizar números
        tableBody.appendChild(row);
      });
      yearCounter = rows.length + 1;
    }
    // Función para guardar años en localStorage
    function saveYears() {
      const tableBody = document.querySelector('#yearsTable tbody');
      const rows = tableBody.querySelectorAll('tr');
      const years = Array.from(rows).map(row => ({
        year: row.querySelector('td:nth-child(2)').textContent
      }));
      localStorage.setItem(`years_${brandName}`, JSON.stringify(years));
    }
    // Función para cargar años desde localStorage
    function loadYears() {
      const years = JSON.parse(localStorage.getItem(`years_${brandName}`) || '[]');
      years.forEach(item => {
        addRowToTable(item.year, false); // No guardar al cargar
      });
      sortTable(); // Ordenar después de cargar
    }
    // Función para agregar fila a la tabla
    function addRowToTable(year, save = true) {
      try {
        const tableBody = document.querySelector('#yearsTable tbody');
        const row = document.createElement('tr');
        // Número
        const numCell = document.createElement('td');
        numCell.textContent = yearCounter;
        row.appendChild(numCell);
        // Año (con enlace clickable)
        const yearCell = document.createElement('td');
        const link = document.createElement('a');
        link.className = 'year-link';
        link.href = `proyectos.html?brand=${encodeURIComponent(brandName)}&year=${year}`;
        link.textContent = year;
        yearCell.appendChild(link);
        row.appendChild(yearCell);
        // Acciones
        const actionsCell = document.createElement('td');
        actionsCell.className = 'actions-cell'; // Clase para centrar botones
        const editBtn = document.createElement('button');
        editBtn.className = 'btn btn-warning btn-sm';
        editBtn.textContent = 'EDITAR';
        editBtn.onclick = () => editYear(row, yearCell);
        actionsCell.appendChild(editBtn);
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'btn btn-danger btn-sm';
        deleteBtn.textContent = 'ELIMINAR';
        deleteBtn.onclick = () => {
          if (confirm('¿Estás seguro de eliminar este año?')) {
            tableBody.removeChild(row);
            sortTable(); // Reordenar después de eliminar
            saveYears(); // Guardar después de eliminar
          }
        };
        actionsCell.appendChild(deleteBtn);
        row.appendChild(actionsCell);
        tableBody.appendChild(row);
        yearCounter++;
        if (save) {
          sortTable(); // Ordenar la tabla después de agregar
          saveYears(); // Guardar en localStorage
        }
      } catch (error) {
        console.error('Error adding row to table:', error);
        alert('Error al agregar el año. Por favor, intenta de nuevo.');
      }
    }
    // Función para editar año
    function editYear(row, yearCell) {
      try {
        const oldYear = yearCell.textContent;
        const newYear = prompt('Nuevo año:', oldYear);
        if (newYear && newYear !== oldYear && yearExists(newYear)) {
          alert('El año ya existe. Por favor, usa un año diferente.');
          return;
        }
        if (newYear && !isNaN(newYear) && newYear.length === 4 && newYear >= 1900 && newYear <= 2100) {
          const link = document.createElement('a');
          link.className = 'year-link';
          link.href = `proyectos.html?brand=${encodeURIComponent(brandName)}&year=${newYear}`;
          link.textContent = newYear;
          yearCell.innerHTML = '';
          yearCell.appendChild(link);
          sortTable(); // Reordenar después de editar
          saveYears(); // Guardar después de editar
        } else if (newYear) {
          alert('Por favor, ingresa un año válido (4 dígitos, entre 1900 y 2100).');
        }
      } catch (error) {
        console.error('Error editing year:', error);
        alert('Error al editar el año. Por favor, intenta de nuevo.');
      }
    }
    // Manejar formulario de agregar
    document.getElementById('addYearForm').addEventListener('submit', (e) => {
      e.preventDefault();
      try {
        const yearInput = document.getElementById('yearInput');
        const year = yearInput.value.trim();
        if (yearExists(year)) {
          alert('El año ya existe. Por favor, usa un año diferente.');
          return;
        }
        if (year && !isNaN(year) && year.length === 4 && year >= 1900 && year <= 2100) {
          addRowToTable(year);
          yearInput.value = '';
        } else {
          alert('Por favor, ingresa un año válido (4 dígitos, entre 1900 y 2100).');
        }
      } catch (error) {
        console.error('Error submitting form:', error);
        alert('Error al agregar el año. Por favor, intenta de nuevo.');
      }
    });
    // Cargar años al iniciar la página
    document.addEventListener('DOMContentLoaded', () => {
      loadYears();
    });
  </script>
</body>
</html>